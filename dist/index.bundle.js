(()=>{"use strict";var t,e={738:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.Facade,a=o(6),c=o(414),s=o(312),u=function(t){function e(e){var o=t.call(this,e)||this;return o._game=null,o}return r(e,t),e.getInstance=function(t){return null==t?null:(null==i.instanceMap[t]&&(i.instanceMap[t]=new e(t)),i.instanceMap[t])},e.prototype.initializeModel=function(){t.prototype.initializeModel.call(this)},e.prototype.initializeView=function(){t.prototype.initializeView.call(this)},e.prototype.initializeController=function(){t.prototype.initializeController.call(this),this.registerCommand(e.STARTUP,s.default)},e.prototype.startup=function(){var t=document.documentElement.clientWidth||document.body.clientWidth,o=document.documentElement.clientHeight||document.body.clientHeight,n=o>t?o/t*640:t/o*640;this.game=new a.default({width:640,height:n,backgroundColor:1087931}),this.sendNotification(e.STARTUP,this.game),this.removeCommand(e.STARTUP),this.sendNotification(c.default.TO_LOADING,{from:null})},e.prototype.destroy=function(){this.game&&(this.game.destroy(!0),this.game=null),window.TweenMax.killAll()},Object.defineProperty(e.prototype,"game",{get:function(){return this._game},set:function(t){this._game=t},enumerable:!1,configurable:!0}),e.STARTUP="startup",e.instance=null,e}(i);e.default=u},6:function(t,e){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(o){var n=t.call(this,o)||this;return e.NAME="SNAKE"+e.COUNT++,n.view.style.width="100%",document.body.prepend(n.view),n}return n(e,t),Object.defineProperty(e.prototype,"stageWidth",{get:function(){return this.screen.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stageHeight",{get:function(){return this.screen.height},enumerable:!1,configurable:!0}),e.NAME="SNAKE",e.COUNT=0,e}(PIXI.Application);e.default=r},25:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.SimpleCommand,a=o(414),c=o(330),s=o(977),u=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.execute=function(t){var o=this;console.log("SceneCommand notification:",t);var n=t.getName(),r=(t.getBody(),this.facade.retrieveProxy(c.default.NAME));switch(n){case e.GAME_START:$(document).on("keydown",(function(t){switch(t.keyCode){case 32:r.pause=!r.pause;break;case 37:o.sendNotification(e.BLOCK_MOVE_LEFT);break;case 38:o.sendNotification(e.BLOCK_ROTATE);break;case 39:o.sendNotification(e.BLOCK_MOVE_RIGHT);break;case 40:o.sendNotification(e.BLOCK_MOVE_END)}})),r.resetGameData();var i=setInterval((function(){r.pause||o.sendNotification(e.BLOCK_MOVE_DOWN)}),1e3);r.intervalId=i;break;case e.GAME_OVER:$(document).off("keydown"),r.intervalId&&(clearInterval(r.intervalId),r.intervalId=null);var u=this.facade.retrieveMediator(s.default.NAME).gameScene;this.sendNotification(a.default.TO_END,{from:u})}},e.GAME_START="game_start",e.GAME_OVER="game_over",e.BLOCK_MOVE_DOWN="block_move_down",e.BLOCK_MOVE_LEFT="block_move_left",e.BLOCK_MOVE_RIGHT="block_move_right",e.BLOCK_MOVE_END="block_move_end",e.BLOCK_ROTATE="block_rotate",e}(i);e.default=u},414:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.SimpleCommand,a=o(158),c=o(232),s=o(316),u=o(977),l=o(588),f=o(330),p=o(25),d=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.execute=function(t){console.log("SceneCommand notification:",t);var o=this.facade.game,n=t.getName(),r=t.getBody().from;switch(r&&r instanceof a.default&&(r.destroy(),r.removeAllChildren(),r.removeThis()),n){case e.TO_LOADING:var i=this.facade.retrieveMediator(c.default.NAME).loadingScene;o.stage.addChild(i),i.init();break;case e.TO_START:var d=this.facade.retrieveMediator(s.default.NAME).startScene;o.stage.addChild(d),d.sceneIn(),d.init(),PIXI.sound.stopAll(),PIXI.sound.play("worldscenebgm",{loop:!0,fadeIn:1,fadeOut:1});break;case e.TO_GAME:var h=this.facade.retrieveProxy(f.default.NAME),_=this.facade.retrieveMediator(u.default.NAME).gameScene;o.stage.addChild(_),_.init(h),this.sendNotification(p.default.GAME_START),PIXI.sound.stopAll(),PIXI.sound.play("gamescenebgm",{loop:!0});break;case e.TO_END:PIXI.sound.stop("gamescenebgm",{loop:!0}),PIXI.sound.play("worldscenebgm",{loop:!0,fadeIn:1,fadeOut:1});var y=this.facade.retrieveMediator(l.default.NAME).endScene;o.stage.addChild(y),y.init()}},e.TO_LOADING="to_loading",e.TO_START="to_start",e.TO_GAME="to_game",e.TO_END="to_end",e}(i);e.default=d},61:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.SimpleCommand,a=o(414),c=o(25),s=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.execute=function(){this.facade.registerCommand(a.default.TO_LOADING,a.default),this.facade.registerCommand(a.default.TO_START,a.default),this.facade.registerCommand(a.default.TO_GAME,a.default),this.facade.registerCommand(a.default.TO_END,a.default),this.facade.registerCommand(c.default.GAME_START,c.default),this.facade.registerCommand(c.default.GAME_OVER,c.default)},e}(i);e.default=s},377:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.SimpleCommand,a=o(330),c=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.execute=function(t){var e=t.getBody();this.facade.registerProxy(new a.default(e))},e}(i);e.default=c},312:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.MacroCommand,a=o(377),c=o(778),s=o(61),u=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.initializeMacroCommand=function(){this.addSubCommand(a.default),this.addSubCommand(c.default),this.addSubCommand(s.default)},e}(i);e.default=u},778:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.SimpleCommand,a=o(189),c=o(232),s=o(819),u=o(316),l=o(400),f=o(977),p=o(944),d=o(588),h=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.execute=function(t){var e=t.getBody(),o=new a.default(e);this.facade.registerMediator(new c.default(o));var n=new s.default(e);this.facade.registerMediator(new u.default(n));var r=new l.default(e);this.facade.registerMediator(new f.default(r));var i=new p.default(e);this.facade.registerMediator(new d.default(i))},e}(i);e.default=h},588:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.Mediator,a=o(944),c=o(414),s=function(t){function e(o){var n=t.call(this,e.NAME,o)||this;return n.endScene.on(a.default.CLICK_AGAIN,(function(){n.sendNotification(c.default.TO_GAME,{from:n.endScene})})),n.endScene.on(a.default.CLICK_RESTART,(function(){n.sendNotification(c.default.TO_START,{from:n.endScene})})),n}return r(e,t),e.prototype.listNotificationInterests=function(){return[]},e.prototype.handleNotification=function(t){t.getName()},Object.defineProperty(e.prototype,"endScene",{get:function(){return this.viewComponent},enumerable:!1,configurable:!0}),e.NAME="end_scene_mediator",e}(i);e.default=s},977:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.Mediator,a=o(25),c=o(961),s=function(t){function e(o){return t.call(this,e.NAME,o)||this}return r(e,t),e.prototype.listNotificationInterests=function(){return[a.default.BLOCK_MOVE_DOWN,a.default.BLOCK_MOVE_LEFT,a.default.BLOCK_MOVE_RIGHT,a.default.BLOCK_MOVE_END,a.default.BLOCK_ROTATE]},e.prototype.handleNotification=function(t){console.log("GameSceneMediator notification:",t);var e=t.getName();switch(t.getBody(),t.getType(),e){case a.default.BLOCK_MOVE_DOWN:this.gameScene.block.moveDown()||this.randomCreateBlock(),this.checkScore(),this.checkOver();break;case a.default.BLOCK_MOVE_LEFT:this.gameScene.block.moveLeft();break;case a.default.BLOCK_MOVE_RIGHT:this.gameScene.block.moveRight();break;case a.default.BLOCK_MOVE_END:this.gameScene.block.moveEnd();break;case a.default.BLOCK_ROTATE:this.gameScene.block.rotate()}},e.prototype.randomCreateBlock=function(){var t=this;this.gameScene.removeBlock(),this.gameScene.block.mapGridArr.forEach((function(e){var o=e[0],n=e[1];t.gameScene.map.setMapGridValue(o,n,1)})),this.gameScene.randomBlock()},e.prototype.checkScore=function(){for(var t=0;t<this.gameScene.map.mapData.length;t++)this.gameScene.map.mapData[t].every((function(t){return 0!==t}))&&(console.log("第".concat(t,"行可以消除了")),this.gameScene.map.mapData.splice(t,1),this.gameScene.map.mapData.unshift(new Array(c.MapConfig.cols).fill(0)),this.gameScene.map.renderGrid())},e.prototype.checkOver=function(){this.gameScene.map.mapData[0].some((function(t){return 0!==t}))&&(console.log("游戏结束"),this.gameScene.removeBlock(),this.gameScene.map.resetGridData(),this.sendNotification(a.default.GAME_OVER))},Object.defineProperty(e.prototype,"gameScene",{get:function(){return this.viewComponent},enumerable:!1,configurable:!0}),e.NAME="game_scene_mediator",e}(i);e.default=s},232:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.Mediator,a=o(414),c=function(t){function e(o){var n=t.call(this,e.NAME,o)||this;return n.loadingScene.on("init_complete",n.initComplete,n),n}return r(e,t),e.prototype.initComplete=function(){var t=this,e=new PIXI.Loader;e.add(["./resources/images/loading_bar.png","./resources/images/loading_bar_bg.png","./resources/images/sp_button_background.png","./resources/images/sp_start_background.jpg","./resources/images/sp_end_background.jpg","./resources/images/sp_game_background.jpg"]),e.once("complete",(function(){t.sendNotification(a.default.TO_START,{from:t.loadingScene})})),e.on("progress",(function(e){console.log("加载百分比"+e.progress+"%"),t.loadingScene.setProgress(e.progress)})),e.load(),PIXI.sound.add({worldscenebgm:"./resources/music/worldscenebgm.mp3",gamescenebgm:"./resources/music/gamescenebgm.mp3",drop:"./resources/music/drop.mp3",swap:"./resources/music/swap.mp3"})},Object.defineProperty(e.prototype,"loadingScene",{get:function(){return this.viewComponent},enumerable:!1,configurable:!0}),e.NAME="load_scene_mediator",e}(i);e.default=c},316:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=puremvc.Mediator,a=o(819),c=o(414),s=function(t){function e(o){var n=t.call(this,e.NAME,o)||this;return n.startScene.on(a.default.CLICK_START,(function(){n.sendNotification(c.default.TO_GAME,{from:n.startScene})})),n}return r(e,t),e.prototype.listNotificationInterests=function(){return[]},e.prototype.handleNotification=function(t){t.getName()},Object.defineProperty(e.prototype,"startScene",{get:function(){return this.viewComponent},enumerable:!1,configurable:!0}),e.NAME="start_scene_mediator",e}(i);e.default=s},241:function(t,e){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=PIXI.Container,i=PIXI.Text,a=function(t){function e(e){void 0===e&&(e="");var o=t.call(this)||this,n=PIXI.Sprite.from("./resources/images/sp_button_background.png");n.anchor.set(.5,.5),o.addChild(n);var r=new i(e,{fill:"#FFFFFF"});return o.addChild(r),r.anchor.set(.5,.5),o.interactive=!0,o.on("pointerdown",(function(){o.emit("click")})),o}return n(e,t),e}(r);e.default=a},158:function(t,e){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var o=t.call(this)||this;return o.game=null,o.stageWidth=0,o.stageHeight=0,o.game=e,o.stageWidth=e.stageWidth,o.stageHeight=e.stageHeight,o}return n(e,t),e.prototype.init=function(t){},e.prototype.destroy=function(){},e.prototype.removeAllChildren=function(t){void 0===t&&(t=this);var e=t.children;if(e&&e.length>0)for(var o=e.length-1;o>=0;o--){var n=e[o];this.removeAllChildren(n),n.parent&&n.parent.removeChild(n)}},e.prototype.removeThis=function(){this.parent&&this.parent.removeChild(this)},e}(PIXI.Container);e.default=r},944:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(158),a=o(241),c=PIXI.Sprite,s=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.init=function(){var t=this;this.addChild(c.from("./resources/images/sp_end_background.jpg"));var o=new a.default("再来一次");o.x=this.stageWidth/2,o.y=this.stageHeight/2,o.interactive=!0,o.on("click",(function(){t.emit(e.CLICK_AGAIN)})),this.addChild(o);var n=new a.default("重新开始");n.x=this.stageWidth/2,n.y=this.stageHeight/2+110,n.interactive=!0,n.on("click",(function(){t.emit(e.CLICK_RESTART)})),this.addChild(n)},e.NAME="start_scene",e.CLICK_AGAIN="click_again",e.CLICK_RESTART="click_restart",e}(i.default);e.default=s},332:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=PIXI.Container,a=PIXI.Graphics,c=o(961),s=o(929),u=function(t){function e(e){var o=t.call(this)||this;o.map=null,o.type=null,o.status=0,o.statusCount=0,o.row=null,o.col=null,o.map=e;var n=["S","Z","J","L","T","O","I"],r=n[Math.floor(Math.random()*n.length)],i=s.BlockConfig[r],a=Math.floor(Math.random()*i.length);return o.type=i,o.status=a,o.statusCount=i.length,o.row=0,o.col=3,o.x=o.col*c.MapConfig.gridWidth,o.y=0,o.renderBlock(),o}return r(e,t),e.prototype.renderBlock=function(){for(;this.children.length;)this.removeChildAt(0);for(var t=0;t<this.statusArr.length;t++)for(var e=0;e<this.statusArr[t].length;e++)if(0!==this.statusArr[t][e]){var o=e*c.MapConfig.gridWidth,n=t*c.MapConfig.gridHeight,r=new a;r.lineStyle(2,16706423,1),r.beginFill(16711680),r.drawRect(0,0,c.MapConfig.gridWidth,c.MapConfig.gridHeight),r.endFill(),r.x=o,r.y=n,this.addChild(r)}},e.prototype.moveDown=function(){return!!this.check(this.row+1,this.col)&&(this.row++,this.y=this.row*c.MapConfig.gridHeight,!0)},e.prototype.moveLeft=function(){this.check(this.row,this.col-1)&&(this.col--,this.x=this.col*c.MapConfig.gridWidth)},e.prototype.moveRight=function(){this.check(this.row,this.col+1)&&(this.col++,this.x=this.col*c.MapConfig.gridWidth)},e.prototype.moveEnd=function(){for(var t=this.row;this.check(this.row+1,this.col);)this.row++;this.y=this.row*c.MapConfig.gridHeight,t!==this.row&&PIXI.sound.play("drop")},e.prototype.rotate=function(){var t=this.status;this.status++,this.status>this.statusCount-1&&(this.status=0),this.check(this.row,this.col)||(this.status=t),t!==this.status&&PIXI.sound.play("swap"),this.renderBlock()},e.prototype.check=function(t,e){for(var o,n=this.map.mapData,r=0;r<this.statusArr.length;r++)for(var i=0;i<this.statusArr[r].length;i++){var a=t+r,c=e+i;if(0!==this.statusArr[r][i]&&0!==(null===(o=n[a])||void 0===o?void 0:o[c]))return!1}return!0},Object.defineProperty(e.prototype,"typeArr",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusArr",{get:function(){return this.type[this.status]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mapGridArr",{get:function(){var t=this;return this.statusArr.map((function(e,o){return e.map((function(e,n){return e?[t.row+o,t.col+n]:null}))})).flat(1).filter((function(t){return t}))},enumerable:!1,configurable:!0}),e}(i);e.default=u},929:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlockConfig=void 0,e.BlockConfig={S:[[[1,0,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[1,1,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]],Z:[[[1,1,0,0],[0,1,1,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[1,0,0,0],[0,0,0,0],[0,0,0,0]]],J:[[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]],[[1,1,0,0],[1,0,0,0],[1,0,0,0],[0,0,0,0]],[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[1,1,1,0],[0,0,1,0],[0,0,0,0],[0,0,0,0]]],L:[[[1,0,0,0],[1,0,0,0],[1,1,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[1,1,1,0],[1,0,0,0],[0,0,0,0],[0,0,0,0]],[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]]],T:[[[1,1,1,0],[0,1,0,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],O:[[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]],I:[[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],[[1,1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0]]]}},400:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=PIXI.Container,a=PIXI.Sprite,c=o(158),s=o(332),u=o(961),l=o(567),f=function(t){function e(e){var o=t.call(this,e)||this;return o.gameContainer=null,o.map=null,o.block=null,o}return r(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.addChild(a.from("./resources/images/sp_game_background.jpg")),this.gameContainer=new i,this.gameContainer.x=(this.stageWidth-u.MapConfig.cols*u.MapConfig.gridWidth)/2,this.gameContainer.y=100,this.addChild(this.gameContainer),this.map=new l.default,this.gameContainer.addChild(this.map),this.randomBlock()},e.prototype.removeBlock=function(){this.block&&this.gameContainer.removeChild(this.block)},e.prototype.randomBlock=function(){this.block=new s.default(this.map),this.gameContainer.addChild(this.block)},e.NAME="game_scene",e}(c.default);e.default=f},263:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=PIXI.Container,a=PIXI.Graphics,c=o(961),s=function(t){function e(e,o,n){var r=t.call(this)||this,i=c.MapConfig.gridColor[n],s=new a;s.lineStyle(2,16706423,1),s.beginFill(i),s.drawRect(0,0,c.MapConfig.gridWidth,c.MapConfig.gridHeight),s.endFill(),r.addChild(s);var u=o*c.MapConfig.gridWidth,l=e*c.MapConfig.gridHeight;return r.x=u,r.y=l,r}return r(e,t),e.prototype.setValue=function(t){this.removeChildAt(0);var e=c.MapConfig.gridColor[t],o=new a;o.lineStyle(2,16706423,1),o.beginFill(e),o.drawRect(0,0,c.MapConfig.gridWidth,c.MapConfig.gridHeight),o.endFill(),this.addChildAt(o,0)},e}(i);e.default=s},567:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=PIXI.Container,a=o(961),c=o(263),s=function(t){function e(){var e=t.call(this)||this;e.width=null,e.mapData=null,a.MapConfig.rows;for(var o=a.MapConfig.cols,n=a.MapConfig.gridWidth,r=(a.MapConfig.gridHeight,a.MapConfig.mapData),i=r,s=0;s<i.length;s++)for(var u=i[s],l=0;l<u.length;l++){var f=u[l],p=new c.default(s,l,f);e.addChild(p),e["".concat(s,"_").concat(l)]=p}return e.width=o*n,e.mapData=r,e}return r(e,t),e.prototype.setMapGridValue=function(t,e,o){this.mapData[t][e]=o,this.renderGrid()},e.prototype.resetGridData=function(){for(var t=0;t<this.mapData.length;t++)for(var e=0;e<this.mapData[t].length;e++)this.mapData[t][e]=0,this["".concat(t,"_").concat(e)].setValue(0)},e.prototype.renderGrid=function(){for(var t=0;t<this.mapData.length;t++)for(var e=0;e<this.mapData[t].length;e++){var o=this.mapData[t][e];this["".concat(t,"_").concat(e)].setValue(o)}},e}(i);e.default=s},961:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MapConfig=void 0,e.MapConfig={rows:20,cols:10,gridWidth:48,gridHeight:48,mapData:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],gridColor:{0:"0xffffff",1:"0xe75166",2:"0xab5a2a",3:"0xeecb37",4:"0x8bc830",5:"0xd0d3d4",6:"0x7a6c6c",7:"0xf98d94",8:"0x4d27b0"}}},189:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(158),a=PIXI.Text,c=PIXI.Sprite,s=PIXI.Container,u=PIXI.Graphics,l=function(t){function e(e){var o=t.call(this,e)||this;return o._text=null,o._loading=null,o}return r(e,t),e.prototype.init=function(){this.addChild(c.from("./resources/images/sp_start_background.jpg"));var t=new s;this.addChild(t),t.x=(this.stageWidth-300)/2,t.y=this.stageHeight-300;var e=c.from("./resources/images/loading_bar_bg.png");t.addChild(e);var o=new u;o.beginFill(16711680,1),o.drawRoundedRect(0,0,300,53,30),o.endFill(),t.addChild(o);var n=c.from("./resources/images/loading_bar.png");t.addChild(n),n.anchor.set(1,0),n.y=0,n.mask=o,this._loading=n;var r=new a("加载中...",{fill:"#FFFFFF"});this.addChild(r),r.anchor.set(.5,.5),r.x=this.stageWidth/2,r.y=this.stageHeight-300-30,this._text=r,this.emit("init_complete")},e.prototype.setProgress=function(t){window.TweenMax.to(this._loading,.3,{x:t/100*300}),this._text.text="".concat(parseInt(t),"%")},e.NAME="loading_scene",e}(i.default);e.default=l},819:function(t,e,o){var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i=o(158),a=o(241),c=PIXI.Sprite,s=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.init=function(){var t,e,o=this;this.addChild(c.from("./resources/images/sp_start_background.jpg")),t=new PIXI.Container,this.addChild(t),(e=new a.default("开始")).position.x=this.stageWidth/2,e.position.y=this.stageHeight/2,t.addChild(e),e.scale.x=e.scale.y=0,window.TweenMax.to(e.scale,1,{x:1,y:1,ease:window.Elastic.easeOut,delay:.3}),e.interactive=!0,e.mousedown=e.touchstart=function(){o.sceneOut()}},e.prototype.sceneIn=function(){window.TweenMax.to(this,1,{alpha:1})},e.prototype.sceneOut=function(){var t=this;window.TweenMax.to(this,.3,{alpha:0,onComplete:function(){t.emit(e.CLICK_START)}})},e.NAME="start_scene",e.CLICK_START="click_start",e}(i.default);e.default=s},330:function(t,e){var o,n=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(o){var n=t.call(this,e.NAME)||this;return n.pause=!1,n.game=null,n.intervalId=null,n.game=o,n}return n(e,t),e.prototype.resetGameData=function(){},e.NAME="game_proxy",e}(puremvc.Proxy);e.default=r}},o={};function n(t){var r=o[t];if(void 0!==r)return r.exports;var i=o[t]={exports:{}};return e[t].call(i.exports,i,i.exports,n),i.exports}t=n(6),n(738).default.getInstance(t.default.NAME).startup()})();